<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"/>
        <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>




        <script>
          function loadPage(filename) {
              // Read the text file
              $.get(filename, function(data) {
                // Split the text file into lines
                var lines = data.split('\n');
                
                // Create a variable to store the HTML content
                var htmlContent = '';

                htmlContent += '<table>';
                // Iterate over each line
                for (var i = 0; i < lines.length; i++) {
                  // Split each line into timestamp and text
                  var parts = lines[i].split('] ');
                  
                  if(parts.length==2){
                  // Get the timestamp and text
                  var timestamp = parts[0];
                  var text = parts[1].trim();

                  const regex = /\.\d{3} --> \d{2}:\d{2}/g
                  timestamp = timestamp.replace(regex, "");
                  timestamp = timestamp.replace("[", "");

                  // Append the transcript line to the HTML content
                  //htmlContent += '<p><strong>' + timestamp + ':</strong> ' + text + '</p>';
                  htmlContent += '<tr><td align= "left" style="vertical-align:top;padding-right:15px;color:gray">' + timestamp + '</td><td> ' + text + '</td></tr>';


                }
                else{
                  //htmlContent += '<p>' + lines[i] + '</p>';
                  htmlContent += '</table><table><tr style = "margin-bottom:-40px;"><th></th><th align= "left">' + lines[i] + '</th></tr>';
                }
              }
                htmlContent += '</table>';
                
                // Set the HTML content in the transcript container
                $('#transcriptContainer').html(htmlContent);
              });
          }
        </script>
    </head>
    <body>
      <input id="clickMeEN" type="button" value="English"/>
      <input id="clickMeSE" type="button" value="Swedish"/>
        <div id="transcriptContainer"></div>
        <script>
            $(document).ready(function() {
              document.getElementById("clickMeSE").onclick = function () { loadPage('Jonung.txt'); };
              document.getElementById("clickMeEN").onclick = function () { loadPage('Jonung.en.txt'); };
              //document.getElementById("clickMeSE").onclick = function () { $('#transcriptContainer').html("A"); };
              //document.getElementById("clickMeEN").onclick = function () { $('#transcriptContainer').html("B"); };
              loadPage('Jonung.txt')
            });
          </script>
    </body>
    </html>
